---
sidebarDepth: 3
sidebar: auto
---



## sidebar侧边栏

vuepress支持两种方式的侧边栏

1. 所有页面会使用相同的侧边栏
2. 不同子路径下的页面会使用不同的侧边栏



## 自动生成侧边栏

使用依赖[directory-tree - npm (npmjs.com)](https://www.npmjs.com/package/directory-tree)

```sh
npm i directory-tree
```



### 所有页面相同侧边栏

> `docs\.vuepress\autoSiderbar\AllPageSameSildeBar.js`

```js
/**
 * 所有页面会使用相同的侧边栏
 */

const path = require("path");
const dirTree = require("directory-tree");
const SRC_PATH = path.resolve(__dirname, "../../");
var fs = require('fs');


function toSidebarOption(tree = []) {
  if (!Array.isArray(tree)) return [];


  return tree.map((v) => {
    var stat = fs.statSync(v.path);
  
    if (stat.isDirectory()) {
      return {
        text: v.name,
        link: v.path.split("docs")[1]+'/',
        children: toSidebarOption(v.children),
      };
    } else {
      return {
        text: path.basename(v.path).replace(/\.md$/, ""),
        link: v.path.split("docs")[1]
      }
    }
  });
}

/**
 去除.vuepress的节点
 {
            "path":"d:/Github/vlog/docs/.vuepress",
            "name":".vuepress",
            "children":Array[4]
 }
 * @param {*} srcDir 
 * @returns 
 */
function removeDotvuepress(srcDir){
    return srcDir.children.filter(node => !node.path.endsWith('.vuepress') );
}

function autoGetSidebarOptionBySrcDir(srcPath = SRC_PATH) {
  const srcDir = dirTree(srcPath, {
    extensions: /\.md$/,
    normalizePath: true,
    exclude: /README.md|readme.md/
  });

  const children = removeDotvuepress(srcDir);
  //console.log(JSON.stringify(children))

  const sideBar = toSidebarOption(children);
  console.log('Generated all page same sidebar finished :)');
  return sideBar;
}





//const result = autoGetSidebarOptionBySrcDir();
//console.log(JSON.stringify(result));

/** 生成的结果
[
    {
        "text":"vuepress",
        "link":"/vuepress/",
        "children":[
            {
                "text":"01 搭建vuepress2",
                "link":"/vuepress/01 搭建vuepress2.md"
            },
            {
                "text":"02 图片存放路径",
                "link":"/vuepress/02 图片存放路径.md"
            },
            {
                "text":"03 侧边栏配置",
                "link":"/vuepress/03 侧边栏配置.md"
            }
        ]
    }
]
 */


module.exports = autoGetSidebarOptionBySrcDir;
```



### 不同子路径不同侧边栏

```js

```



## 参考



[配置 | VuePress (vuejs.org)](https://v2.vuepress.vuejs.org/zh/reference/default-theme/config.html#sidebar)

